// ==Bookmarklet==
// @name Switcharoo Bookmarklet
// @author coolreader18
// ==/Bookmarklet==
$(".border").length?$.getJSON("https://api.reddit.com/r/switcharoo/new?limit=1").done(function(t){$(".border ~ .buttons .reply-button a").click()
var e=$($(".border").parents()[1].childNodes[3].childNodes[0].childNodes[1])
e.find("textarea")[0].value="Ah, the ol' reddit [switcharoo]("+t.data.children[0].data.url+")! \n\n(make this creative/relevant and remove this message, then click save)",e.find("button.save").click(function(){function t(){var e=$(".border").parents()[1].childNodes[3].childNodes[0].childNodes[0].attributes.getNamedItem("data-permalink")
if(e){var r="https://www.reddit.com"+e.value,s=prompt("What was the intended subject?",""),a=prompt("What was it switched to?",""),n=prompt("How many comments before your switcharoo comment would someone need to read to understand it?",""),o="https://www.reddit.com/r/switcharoo/submit?url="+encodeURI(r+"?context="+n)+"&title="+encodeURI(s+" vs "+a)
"switcharoo"==prompt('Please read the rules on the sidebar of the popup to make sure that your post follows them. To confirm that you can handle that reponsibility, type in "switcharoo".')?window.open(o,"_blank"):alert("Just be responsible next time")}else setTimeout(t,100)}t()})}).fail(function(){alert("Couldn't reach reddit, it may be blocked or down")}):alert('Couldn\'t find the permalinked comment, please click the "permalink" button underneath the comment that switches the subjects')
