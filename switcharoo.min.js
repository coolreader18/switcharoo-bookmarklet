// ==Bookmarklet==
// @name Switcharoo Bookmarklet
// @author coolreader18
// ==/Bookmarklet==
if($(".border").length){$.getJSON("https://api.reddit.com/r/switcharoo/new?limit=1").done(e=>{$(".border ~ .buttons .reply-button a").click();var t=$(".border").parents().eq(1).find(".usertext-edit");t.find("textarea").val(`Ah, the ol' reddit [switcharoo](${e.data.children[0].data.url})!\n\n(make this creative/relevant and remove this message, then click save`);t.find("button.save").click(()=>{var e=setInterval(()=>{var t=$(".border").parents().find(".child").children().eq(0).children().eq(0).data("permalink");if(!t){clearInterval(e)}else{var r=`https://www.reddit.com${t}`,a=prompt("What was the intended subject?"),o=prompt("What was it switched to?"),n=prompt("How many comments before your switcharoo comment would someone need to read to understand it?"),i=new URL("https://www.reddit.com/r/switcharoo/submit"),d=i.searchParams;d.append("url",r);d.append("context",n);d.append("title",`${a} vs ${o}`);if(prompt('Please read the rules on the sidebar of the popup to make sure that your post follows them. To confirm that you can handle that reponsibility, type in "switcharoo".')=="switcharoo"){window.open(i.toString(),"_blank")}else{alert("Just be responsible next time")}}},10)})}).fail(()=>{alert(new Error("Couldn't reach reddit, it may be blocked or down"))})}else{alert(new Error('Couldn\'t find the permalinked comment, please click the "permalink" button underneath the comment that switches the subjects'))}
